name: Pruebas AutomÃ¡ticas de Calidad y Funcionalidad

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  # ğŸ” VerificaciÃ³n de CÃ³digo con ShellCheck
  linting:
    name: VerificaciÃ³n con ShellCheck
    runs-on: ubuntu-latest
    timeout-minutes: 2  # â³ Detiene la ejecuciÃ³n si tarda mÃ¡s de 2 minutos

    steps:
      - name: ğŸ“¥ Checkout del cÃ³digo
        uses: actions/checkout@v3

      - name: ğŸ” Instalar ShellCheck
        run: sudo apt install -y shellcheck

      - name: âœ… Ejecutar ShellCheck en el script
        run: |
          echo "Ejecutando ShellCheck en creador.sh..."
          shellcheck creador.sh || exit 1

  # ğŸ§ª Pruebas Funcionales con Bats
  functional_tests:
    name: Pruebas Funcionales con Bats
    runs-on: ubuntu-latest
    timeout-minutes: 2  # â³ LÃ­mite para evitar bloqueos

    steps:
      - name: ğŸ“¥ Checkout del cÃ³digo
        uses: actions/checkout@v3

      - name: ğŸ“‚ Mostrar archivos del repositorio (DepuraciÃ³n)
        run: ls -lah

      - name: ğŸ” Instalar Bats
        run: sudo apt install -y bats

      - name: ğŸ§ª Ejecutar pruebas con Bats
        run: |
          echo "Ejecutando pruebas funcionales con Bats..."
          bats tests/test_subcreator.bats || exit 1
